<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Shotgrid Integration</title>
    <link rel="stylesheet" type="text/css" href="shotgrid-addon.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>

  <body>
    <h1>Shotgrid Sync</h1>
    <p>
        From this page you can Import projects from Shotgrid or trigger a project Sync!<br>
        In order for the below to work, a <b><code>ShotgridProcessor</code> service must be running</b><br>
        But first we need to fetch data from Shotgrid:
    </p>

    <button id="sg-fetch-data" onclick="getShotgridData();">Fetch data from Shotgrid</button>
    <div class="shotgrid-addon-container">
        <div class="shotgrid-addon-block">
            <h2>Import a New Project from Shotgrid</h2>
            <p> To be able to import a project from Shotgrid, there are two minimum requirements on Shotgrid:</p>
            <ul>
                <li> The Project name cannot contain spaces. </li>
                <li> The Project has to have a code. (You can choose what the field code is in the Addon Settings) </li>
            </ul>
            <p> If the above criteria isn't met, they won't show in the dropdown, so make sure they are correctly configured.</p>

            <div class="project-creation" display="none">
                <div class="project-item">
                    <label for="new-shotgrid-projects-select">Choose a Shotgrid Project:</label>
                    <select name="new-shotgrid-projects" id="new-shotgrid-projects-select">
                        <option value="" id="fetching-shotgrid-option">Please press the "Fetch data from Shotgrid" above.</option>
                    </select>
                </div>
            </div>

            <button id="sg-import-shotgrid-project" disabled>Import Selected Project from Shotgrid...</button>

            <h2>Create an AYON project in Shotgrid</h2>
            <p>Choose the AYON project below that you want to create in Shotgrid, not that if the project already exists in Shotgrid it will attempt to repair it, and you'll have to then use the "Manage Existing Proejct" to sync it.</p>

            <div class="project-creation" display="none">
                <div class="project-item">
                    <label for="new-ayon-projects-select">Choose an AYON Project:</label>
                    <select name="new-ayon-projects" id="new-ayon-projects-select">
                        <option value="" id="fetching-ayon-option">Please press the "Fetch data from Shotgrid" above.</option>
                    </select>
                    </select>
                </div>
            </div>

            <button id="sg-export-ayon-project" disabled>Create Selected Project in Shotgrid...</button>

        </div>
        <div class="shotgrid-addon-block">
            <h2>Manage Existing Project</h2>
            <p>Compare the Shotgrid Project with the Ayon one, and backfill any missing data from Shotgrid.</p>
            <p>Currently we sync: Episodes, Sequences, Shots and Tasks.</p>
            <div class="project-item">
                <label for="manage-shotgrid-projects-select">Already imported Projects:</label>
                <select name="shotgrid-projects" id="manage-shotgrid-projects-select">
                    <option value="">Please press the "Fetch data from Shotgrid" above.</option>
                </select>
            </div>

            <button id="sg-sync-from-shotgrid" disabled> Sync Shotgrid Project into AYON</button>
            <button id="sg-sync-from-ayon" disabled> Sync AYON into Shotgrid</button>
        </div>
    </div>
    <p id="call-result"> </p>

    <script type="text/javascript" src="shotgrid-addon.js"></script>
  </body>
</html>

